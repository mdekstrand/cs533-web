
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Missing Data &#8212; CS 533 Fall 2021</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/fonts.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/tabinsert.js"></script>
    <script src="../../../_static/urlclean.js"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "mdekstrand/cs533-web");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "üí¨ comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"E": "\\mathrm{E}", "Field": "\\mathcal{F}", "P": "\\mathrm{P}", "Cov": "\\mathrm{Cov}", "Cor": "\\mathrm{Cor}", "Var": "\\mathrm{Var}", "log": "\\operatorname{log}", "Odds": "\\operatorname{Odds}", "OR": "\\operatorname{OR}", "IND": "\\mathbb{I}", "Reals": "\\mathbb{R}"}}, "HTML-CSS": {"fonts": ["TeX"]}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../../_static/logo.png"/>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="copyright" title="Copyright" href="../../../copyright/" />
    <link rel="next" title="Movie Matrix Decomposition" href="../MovieDecomp/" />
    <link rel="prev" title="Rebuilding Regression" href="../MinimizeRegression/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../">
      
      
      
      <h1 class="site-logo" id="site-title">CS 533 Fall 2021</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search/" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../">
   CS 533 Homepage
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Info
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../syllabus/">
   Syllabus
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../schedule/">
   Schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../glossary/">
   Glossary
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Content
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week0/">
   Week 0 ‚Äî Pre-Class Welcome
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../week1/">
   Week 1 ‚Äî Questions (8/23‚Äì27)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../week1/DemoNotebook/">
     Demo Notebook
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../week1/1-7-types-operations/">
     Data Types and Operations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../week2/">
   Week 2 ‚Äî Description (8/30‚Äì9/3)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../week2/2-2-PandasBasics/">
     Introducing Pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../week2/2-4-AggregatesAndGroups/">
     Aggregates and Groups
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../week2/2-6-DescribingDistributions/">
     Describing Distributions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../week3/">
   Week 3 ‚Äî Presentation (9/6‚Äì10)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../week3/3-6-ChartsFromTheGroundUp/">
     Drawing Charts
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week4/">
   Week 4 ‚Äî Inference (9/13‚Äì17)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week5/">
   Week 5 ‚Äî Filling In (9/20‚Äì24)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week6/">
   Week 6 ‚Äî Two Variables (Sep. 27‚ÄìOct. 1)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week7/">
   Week 7 ‚Äî Getting Data (Oct. 4‚Äì8)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week8/">
   Week 8 ‚Äî Regression (Oct. 11‚Äì15)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week9/">
   Week 9 ‚Äî Models &amp; Prediction (Oct. 18‚Äì22)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week10/">
   Week 10 ‚Äî Classification (10/25‚Äì29)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week11/">
   Week 11 ‚Äî More Modeling (11/1‚Äì5)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week12/">
   Week 12 ‚Äî Text (11/8‚Äì12)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week13/">
   Week 13 ‚Äî Unsupervised (11/15‚Äì19)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week14/">
   Week 14 ‚Äî Workflow (11/29‚Äì12/3)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../week15/">
   Week 15 ‚Äî What Next? (12/6‚Äì10)
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Assignments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/">
   Rubric
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../assignments/A0/">
   Assignment 0
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../assignments/A0/A0-Notebook/">
     CS 533 Assignment 0
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/A1/">
   Assignment 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/A2/">
   Assignment 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/A3/">
   Assignment 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/A4/">
   Assignment 4
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/A5/">
   Assignment 5
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/A6/">
   Assignment 6
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/A7/">
   Assignment 7
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Resources
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../software/">
   Software and Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../documentation/">
   Documentation &amp; Reading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../data/">
   Data Sets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../notebook-checklist/">
   Notebook Checklist &amp; Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../probability/">
   Notes on Probability
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../problems/">
   Common Problems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../onyx/">
   Remotely Using Onyx
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../git-resources/">
   Git Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../environments/">
   Software Environments
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../">
   Tutorials
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../AdvancedPipeline/">
     Advanced Pipeline Example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../BooleanSeries/">
     Tricks with Boolean Series
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../BuildingData/">
     Building Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ChartFinishingTouches/">
     Finishing Touches
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Charting/">
     Drawing Charts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ClusteringExample/">
     Clustering Example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Correlation/">
     Correlation and Basic Linear Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../CriticScores/">
     Charting Movie Scores
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Distributions/">
     Distributions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../EmpiricalProbabilities/">
     Empirical Probabilities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../FetchCHIPapers/">
     Bibliography Fetch
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../FunWithNumbers/">
     Fun with Numbers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Functions/">
     Writing Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Indexing/">
     Indexing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../LogitRegressionDemo/">
     Logistic Regression Demo
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MLTimeSeries/">
     MovieLens Time Series
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MinimizeRegression/">
     Rebuilding Regression
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Missing Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MovieDecomp/">
     Movie Matrix Decomposition
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../OneSample/">
     One Sample
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../OverfittingSimulation/">
     Overfitting Simulation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../PCADemo/">
     PCA Demo
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../PenguinSamples/">
     Sampling and Testing the Penguins
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Regressions/">
     Regressions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Reshaping/">
     Reshaping Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../SamplingDists/">
     Sampling Distributions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../SciKitLogistic/">
     SciKit Logistic Regression Demo
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../SciKitPipeline/">
     SciKit Pipeline and Transform Demo
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../SciKitRegression/">
     SciKit-Learn Linear Regression Demo
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../SciKitTransform/">
     SciKit Transformations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Selection/">
     Selecting Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Sessions/">
     Sessionization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../SpamFilter/">
     Spam Detector Example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../TuningExample/">
     Tuning Example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../UsingTheCensus/">
     Using Census Data
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Site Details
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../copyright/">
   Copyright and License
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../_sources/resources/tutorials/MissingData.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/mdekstrand/cs533-web"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/mdekstrand/cs533-web/issues/new?title=Issue%20on%20page%20%2Fresources/tutorials/MissingData.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/mdekstrand/cs533-web/edit/main/resources/tutorials/MissingData.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#about-missing-data">
   About Missing Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#representing-missing-data">
     Representing Missing Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-meaning-of-missing-data">
     The Meaning of Missing Data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#libraries-and-data">
   Libraries and Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#understanding-missing-data">
   Understanding Missing Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dropping-invalid-values">
     Dropping Invalid Values
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#actually-describing-the-data">
     Actually Describing the Data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ignoring-missing-values">
   Ignoring Missing Values
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#filling-data">
   Filling Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#filling-with-a-fixed-value">
     Filling with a Fixed Value
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#filling-with-another-series">
     Filling with Another Series
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#imputing-values">
     Imputing Values
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#think-about-the-analysis">
     Think About the Analysis
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="missing-data">
<h1>Missing Data<a class="headerlink" href="#missing-data" title="Permalink to this headline">¬∂</a></h1>
<p>This notebook discusses various approaches for dealing with missing data, and technical implementations for them.</p>
<p>For more details on Pandas‚Äô storage and routines for missing data, see ‚Äú<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/missing_data.html">Working with missing data</a>‚Äù in the Pandas user guide.</p>
<p>What we do with missing data depends on two things:</p>
<ul class="simple">
<li><p>The meaning and source of the missingness</p></li>
<li><p>The purpose of the analysis</p></li>
</ul>
<p>Remember that our goal in this class is to use data to provide insight into questions.  Therefore, the guiding consideration for how to deal with missing data must be: what approach yields the most robust insight into my question in this context?</p>
<p>There are two broad approaches we can take to missing data:</p>
<ol class="simple">
<li><p>Exclude it</p></li>
<li><p>Fill it in with a value</p></li>
</ol>
<p>Both have their downsides, and there are many options within each.  There is not a one-size-fits-all rule, except that blanket whole-data-source approaches that don‚Äôt flow from an understanding of the data and the questions are almost certainly wrong.</p>
<p><strong>Do not</strong> just call <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.dropna.html#pandas.DataFrame.dropna" title="(in pandas v1.4.3)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dropna()</span></code></a> or <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="(in pandas v1.4.3)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fillna()</span></code></a> or run scikit-learn‚Äôs <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.impute.SimpleImputer.html#sklearn.impute.SimpleImputer" title="(in scikit-learn v1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleImputer</span></code></a> on your whole data frame to make the missing values go away, particularly without understanding the data distribution and its relationship to your analysis goals.</p>
<p><strong>Always</strong> look at your data and think about it.</p>
<p>This notebook demonstrates two things:</p>
<ul class="simple">
<li><p>Looking at the data to understand missingness, and <em>removing</em> values that are actually missing</p></li>
<li><p>Dealing with missing data in a variety of situations</p></li>
</ul>
<p><strong>Rule:</strong> for the purposes of dealing with missing data, cleanliness or completeness is usually <em>not</em> a property of the data <em>itself</em>.  It is better to think from our question, and how we want to handle missing data <em>for that question</em>.  The answer may not be the same for all questions in an analysis!</p>
<div class="section" id="about-missing-data">
<h2>About Missing Data<a class="headerlink" href="#about-missing-data" title="Permalink to this headline">¬∂</a></h2>
<p>Many data sources do not have complete data ‚Äî some observations are missing values for one or more variables.  Data can be missing for a variety of reasons:</p>
<ul class="simple">
<li><p>The instance does not have the property being measured</p></li>
<li><p>The property wasn‚Äôt measurable</p></li>
<li><p>There was a measurement failure (e.g. a temperature sensor failed)</p></li>
<li><p>The data has been lost or corrupted during transmission</p></li>
</ul>
<p>Dealing with missing data is often considered part of data cleaning, that we‚Äôll talk more about in a later week, but some of it we need to be able to do quickly.  Further, I argue in this notebook that that really isn‚Äôt the best way to think of it, but rather it is a part of our <em>analysis</em>: how does the analysis handle missing data?</p>
<p>But first, we need to talk about how it‚Äôs stored and represented.</p>
<div class="section" id="representing-missing-data">
<h3>Representing Missing Data<a class="headerlink" href="#representing-missing-data" title="Permalink to this headline">¬∂</a></h3>
<p>There are a variety of ways to represent missing data in an input file.  The <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.read_csv.html#pandas.read_csv" title="(in pandas v1.4.3)"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_csv()</span></code></a> function automatically detects missing data in CSV (and TSV) files in a variety of representations, including:</p>
<ul class="simple">
<li><p>Empty field</p></li>
<li><p>NA</p></li>
<li><p>NaN</p></li>
<li><p>NULL</p></li>
</ul>
<p>When we read the HETREC data in the other notebooks, we specifically specify the <code class="docutils literal notranslate"><span class="pre">na_values=[&quot;\\N&quot;]</span></code> option because HETREC represents missing data with the string <code class="docutils literal notranslate"><span class="pre">\N</span></code> (we need the second backslash to escape it).  This is the notation PostgreSQL‚Äôs <code class="docutils literal notranslate"><span class="pre">COPY</span></code> command uses in its default format when emitting <code class="docutils literal notranslate"><span class="pre">NULL</span></code> values from the database.</p>
<p>Some data sources also record missing data with a numeric value, in which case Pandas will <em>not</em> think it is missing.  Sometimes this is 0; sometimes it is a value with a much larger magnitude that expected actual values, such as 99 or -99999.  When <em>storing</em> data, I strongly recommend storing it as missing instead of an out-of-range numeric value, for two reasons: so the data actually looks like it is missing when it is loaded, and to eliminate risk of the missing-value sentinel accidentally being a legitimate value.  Storing missing data as 0 is particularly problematic, because 0 may well be a legitimate value, or close to a legitimate value.</p>
<p>Once the data is loaded into Pandas, missing data is represented in two primary ways:</p>
<ul class="simple">
<li><p>In <code class="docutils literal notranslate"><span class="pre">object</span></code> fields, it is <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">float64</span></code> (and <code class="docutils literal notranslate"><span class="pre">float32</span></code> fields), the IEEE floating point value ‚ÄòNot a Number‚Äô (NaN)</p></li>
</ul>
<p>Integer-based types <em>cannot</em> represent missing data. This is one reason why an integer column may be read as a float ‚Äî Pandas finds missing values and needs to store them, so its default is to load as a float.  This is usually fine, as a 64-bit floating-point number can accurately represent any integer up to <span class="math notranslate nohighlight">\(2^{53} - 1\)</span>.  There is an <code class="docutils literal notranslate"><span class="pre">Int64</span></code> type (distinct from <code class="docutils literal notranslate"><span class="pre">int64</span></code>) that stores integers with an additional mask that indicates if the value is present or not, if you truly need 64-bit integers with missing data.</p>
<p>One other quick note: <code class="docutils literal notranslate"><span class="pre">NaN</span></code> is <em>weird</em>.  Any operation performed on it returns <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (<code class="docutils literal notranslate"><span class="pre">NaN</span> <span class="pre">*</span> <span class="pre">5</span></code> is <code class="docutils literal notranslate"><span class="pre">NaN</span></code>).  But also, it is not equal to anything, <em>including itself</em> (<code class="docutils literal notranslate"><span class="pre">NaN</span> <span class="pre">==</span> <span class="pre">NaN</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>).  In order to test for missingness, you need to use the Pandas <code class="docutils literal notranslate"><span class="pre">.isnull</span></code> method (checks for NaN or whatever value is used for ‚Äòmissing‚Äô for the data in question), or the <code class="docutils literal notranslate"><span class="pre">np.isnan</span></code> function from NumPy (which checks numeric arrays for <code class="docutils literal notranslate"><span class="pre">NaN</span></code>).</p>
</div>
<div class="section" id="the-meaning-of-missing-data">
<h3>The Meaning of Missing Data<a class="headerlink" href="#the-meaning-of-missing-data" title="Permalink to this headline">¬∂</a></h3>
<p>Conceptually, when a value is missing, there are two <em>different</em> possibilities for the meaning of this missingness:</p>
<ul class="simple">
<li><p>We know that there is no value</p></li>
<li><p>We do not know the value, including possibly whether there is a value</p></li>
</ul>
<p>Consider the variable ‚Äúwheel size‚Äù for a vehicle.  The wheel size might be missing for a couple of reasons:</p>
<ul class="simple">
<li><p>We don‚Äôt have a measurement of the wheel size for a particular car. It has a wheel size ‚Äî cars have wheels ‚Äî but we don‚Äôt know what this particular car‚Äôs wheel size is.</p></li>
<li><p>Our vehicle table includes some observations of hovercraft, which have no wheels and therefore have no wheel size.</p></li>
</ul>
<p>Sometimes, we may encode these differently ‚Äî e.g. unknown vs. not applicable ‚Äî or we may have two columns:</p>
<ul class="simple">
<li><p><em>wheel size</em></p></li>
<li><p><em>vehicle type</em>, <em>has_wheels</em>, or <em>wheel_count</em>, from which we can infer whether or not wheel size is a meaningful variable for that vehicle</p></li>
</ul>
<p>Note that if we have a <em>wheel_count</em>, it too may be missing, in which case we don‚Äôt have quite enough info to interpret a missing wheel size.</p>
<p>When it comes to the actual code of dealing with missing data, there isn‚Äôt a difference between these meanings of missingness, but it may make a difference when deciding which approach to take.</p>
</div>
</div>
<div class="section" id="libraries-and-data">
<h2>Libraries and Data<a class="headerlink" href="#libraries-and-data" title="Permalink to this headline">¬∂</a></h2>
<p>So we can actually show code, let‚Äôs import our Python libraries and some data.  I‚Äôll use the HETREC data set again that we‚Äôve been using in the other notebooks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">movies</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;../data/hetrec2011-ml/movies.dat&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">N&#39;</span><span class="p">],</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
<span class="n">movies</span> <span class="o">=</span> <span class="n">movies</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
<span class="n">movies</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>imdbID</th>
      <th>spanishTitle</th>
      <th>imdbPictureURL</th>
      <th>year</th>
      <th>rtID</th>
      <th>rtAllCriticsRating</th>
      <th>rtAllCriticsNumReviews</th>
      <th>rtAllCriticsNumFresh</th>
      <th>rtAllCriticsNumRotten</th>
      <th>rtAllCriticsScore</th>
      <th>rtTopCriticsRating</th>
      <th>rtTopCriticsNumReviews</th>
      <th>rtTopCriticsNumFresh</th>
      <th>rtTopCriticsNumRotten</th>
      <th>rtTopCriticsScore</th>
      <th>rtAudienceRating</th>
      <th>rtAudienceNumRatings</th>
      <th>rtAudienceScore</th>
      <th>rtPictureURL</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Toy story</td>
      <td>114709</td>
      <td>Toy story (juguetes)</td>
      <td>http://ia.media-imdb.com/images/M/MV5BMTMwNDU0...</td>
      <td>1995</td>
      <td>toy_story</td>
      <td>9.0</td>
      <td>73.0</td>
      <td>73.0</td>
      <td>0.0</td>
      <td>100.0</td>
      <td>8.5</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>0.0</td>
      <td>100.0</td>
      <td>3.7</td>
      <td>102338.0</td>
      <td>81.0</td>
      <td>http://content7.flixster.com/movie/10/93/63/10...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Jumanji</td>
      <td>113497</td>
      <td>Jumanji</td>
      <td>http://ia.media-imdb.com/images/M/MV5BMzM5NjE1...</td>
      <td>1995</td>
      <td>1068044-jumanji</td>
      <td>5.6</td>
      <td>28.0</td>
      <td>13.0</td>
      <td>15.0</td>
      <td>46.0</td>
      <td>5.8</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>40.0</td>
      <td>3.2</td>
      <td>44587.0</td>
      <td>61.0</td>
      <td>http://content8.flixster.com/movie/56/79/73/56...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Grumpy Old Men</td>
      <td>107050</td>
      <td>Dos viejos gru√±ones</td>
      <td>http://ia.media-imdb.com/images/M/MV5BMTI5MTgy...</td>
      <td>1993</td>
      <td>grumpy_old_men</td>
      <td>5.9</td>
      <td>36.0</td>
      <td>24.0</td>
      <td>12.0</td>
      <td>66.0</td>
      <td>7.0</td>
      <td>6.0</td>
      <td>5.0</td>
      <td>1.0</td>
      <td>83.0</td>
      <td>3.2</td>
      <td>10489.0</td>
      <td>66.0</td>
      <td>http://content6.flixster.com/movie/25/60/25602...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Waiting to Exhale</td>
      <td>114885</td>
      <td>Esperando un respiro</td>
      <td>http://ia.media-imdb.com/images/M/MV5BMTczMTMy...</td>
      <td>1995</td>
      <td>waiting_to_exhale</td>
      <td>5.6</td>
      <td>25.0</td>
      <td>14.0</td>
      <td>11.0</td>
      <td>56.0</td>
      <td>5.5</td>
      <td>11.0</td>
      <td>5.0</td>
      <td>6.0</td>
      <td>45.0</td>
      <td>3.3</td>
      <td>5666.0</td>
      <td>79.0</td>
      <td>http://content9.flixster.com/movie/10/94/17/10...</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Father of the Bride Part II</td>
      <td>113041</td>
      <td>Vuelve el padre de la novia (Ahora tambi√©n abu...</td>
      <td>http://ia.media-imdb.com/images/M/MV5BMTg1NDc2...</td>
      <td>1995</td>
      <td>father_of_the_bride_part_ii</td>
      <td>5.3</td>
      <td>19.0</td>
      <td>9.0</td>
      <td>10.0</td>
      <td>47.0</td>
      <td>5.4</td>
      <td>5.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>20.0</td>
      <td>3.0</td>
      <td>13761.0</td>
      <td>64.0</td>
      <td>http://content8.flixster.com/movie/25/54/25542...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ratings</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;../data/hetrec2011-ml/user_ratedmovies-timestamps.dat&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">ratings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>userID</th>
      <th>movieID</th>
      <th>rating</th>
      <th>timestamp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>75</td>
      <td>3</td>
      <td>1.0</td>
      <td>1162160236000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>75</td>
      <td>32</td>
      <td>4.5</td>
      <td>1162160624000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>75</td>
      <td>110</td>
      <td>4.0</td>
      <td>1162161008000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>75</td>
      <td>160</td>
      <td>2.0</td>
      <td>1162160212000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>75</td>
      <td>163</td>
      <td>4.0</td>
      <td>1162160970000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="understanding-missing-data">
<h2>Understanding Missing Data<a class="headerlink" href="#understanding-missing-data" title="Permalink to this headline">¬∂</a></h2>
<p>One of the key things to know for dealing with missing data is to find out how much is actually missing.  The <code class="docutils literal notranslate"><span class="pre">count()</span></code> method does this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">movies</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>title                     10197
imdbID                    10197
spanishTitle              10197
imdbPictureURL            10016
year                      10197
rtID                       9886
rtAllCriticsRating         9967
rtAllCriticsNumReviews     9967
rtAllCriticsNumFresh       9967
rtAllCriticsNumRotten      9967
rtAllCriticsScore          9967
rtTopCriticsRating         9967
rtTopCriticsNumReviews     9967
rtTopCriticsNumFresh       9967
rtTopCriticsNumRotten      9967
rtTopCriticsScore          9967
rtAudienceRating           9967
rtAudienceNumRatings       9967
rtAudienceScore            9967
rtPictureURL               9967
dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Data in the real world is <em>messy</em>.  Why are there movies that don‚Äôt have a RottenTomatoes ID, but do have values for the other RT fields?  But we‚Äôre going to set that aside for a moment and look at another issue in the data.</p>
<div class="section" id="dropping-invalid-values">
<h3>Dropping Invalid Values<a class="headerlink" href="#dropping-invalid-values" title="Permalink to this headline">¬∂</a></h3>
<p>In this data source, we actually don‚Äôt have <em>enough</em> missing data.</p>
<p>How are all-critics ratings distribtued? Let‚Äôs start at looking at the numeric statistics (after pulling out into a variable for convenience):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ac_rates</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtAllCriticsRating&#39;</span><span class="p">]</span>
<span class="n">ac_rates</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    9967.000000
mean        5.139300
std         2.598048
min         0.000000
25%         4.000000
50%         5.800000
75%         7.000000
max         9.600000
Name: rtAllCriticsRating, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>And the histogram, to see the distribution visually:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ac_rates</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a73c975490&gt;
</pre></div>
</div>
<img alt="../../../_images/MissingData_12_1.png" src="../../../_images/MissingData_12_1.png" />
</div>
</div>
<p>We have minimum value of 0, but more interestingly, we have a <em>gap</em> between the 0s and the rest of the values. Starting at about 2, the values follow a relatively normal-looking distribution like we might expect for distributions of quality assessments, and 0 is a distinct bar.  That suggests that 0 is perhaps <em>qualitatively</em> different from the other values ‚Äî perhaps when the data was collected, 0 was used when the critic rating score wasn‚Äôt available?</p>
<p>Further, though, according to the <a class="reference external" href="https://www.rottentomatoes.com/faq">Rotten Tomatoes FAQ</a>, average ratings are based on taking the average of critic ratings, after mapping them to a 1‚Äì10 scale.  We don‚Äôt have access to the FAQ as of when the HETREC data was crawled, but 1‚Äì10 is a common rating value.</p>
<p>If the average rating is the average of individual rating values in the range 1‚Äì10, is it possible for an actual average rating to have a value of 0?</p>
<p>Another thing we can do to illuminate this interpretation is to look at the distribution of ratings greater than 0:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ac_rates</span><span class="p">[</span><span class="n">ac_rates</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    8441.000000
mean        6.068404
std         1.526898
min         1.200000
25%         5.000000
50%         6.200000
75%         7.200000
max         9.600000
Name: rtAllCriticsRating, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ac_rates</span><span class="p">[</span><span class="n">ac_rates</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a73d26bc70&gt;
</pre></div>
</div>
<img alt="../../../_images/MissingData_15_1.png" src="../../../_images/MissingData_15_1.png" />
</div>
</div>
<p>We have a large number of 0 values, and then the variable <em>jumps to 1.2</em>, and is relatively continuous above that.  This strong discontinuity is evidence of a qualitative difference - if it were an actual observed value of 0, we would expect quite a few 0.1, 0.2, etc., up to 1.2; actual observations are seldom that clustered on a single precise value, <em>particularly when the other observations are not</em>.</p>
<p>The documentation is the much more definitive source, but the distribution gives us insight that there is something distinctly, qualitatively different about 0, that suggests we should go looking in the docs. (Which we should do anyway.)</p>
<p>So let‚Äôs consider average ratings of 0 to be missing, and do this for all the rating columns.  Pandas lets us bulk-set data (trick here: <code class="docutils literal notranslate"><span class="pre">.loc</span></code> can take a mask as the row argument, instead of an index key or list of index keys; this joint-accessor means ‚Äòthe ratings column, at every row where the mask is <code class="docutils literal notranslate"><span class="pre">False</span></code>‚Äô; the mask is ‚Äòratings column is 0‚Äô):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">movies</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtAllCriticsRating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;rtAllCriticsRating&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtAllCriticsRating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    8441.000000
mean        6.068404
std         1.526898
min         1.200000
25%         5.000000
50%         6.200000
75%         7.200000
max         9.600000
Name: rtAllCriticsRating, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Now we have 8441 non-missing values, instead of the old 9.9K.  Let‚Äôs do this for the other rating columns too:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">movies</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtTopCriticsRating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;rtTopCriticsRating&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtTopCriticsRating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    4662.000000
mean        5.930330
std         1.534093
min         1.600000
25%         4.800000
50%         6.100000
75%         7.100000
max        10.000000
Name: rtTopCriticsRating, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">movies</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtAudienceRating&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;rtAudienceRating&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtAudienceRating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    7345.000000
mean        3.389258
std         0.454034
min         1.500000
25%         3.100000
50%         3.400000
75%         3.700000
max         5.000000
Name: rtAudienceRating, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>It would be good to also try to understand missingness in the scores (% Fresh); the number of critics is going to be useful there, because if a movie has no critics, it can‚Äôt have a score!  There it‚Äôs harder though, because 0% Fresh is an actual, achievable score, and if a movie has only 1 critic, then it will either be 0% or 100% fresh depending on that critic‚Äôs score!  So it‚Äôs harder to figure out where the data we have should actually be missing.</p>
<p>That also isn‚Äôt a problem we have to solve for our educational purposes of understanding what to do once we have missing data, so let‚Äôs move forward.</p>
</div>
<div class="section" id="actually-describing-the-data">
<h3>Actually Describing the Data<a class="headerlink" href="#actually-describing-the-data" title="Permalink to this headline">¬∂</a></h3>
<p>Now that we have made our rating values missing when they need to be, let‚Äôs see how many we have.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">describe</span></code> method, applied to a <em>data frame</em>, creates a data frame with the description statistics.  Let‚Äôs do this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rate_stats</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[[</span><span class="s1">&#39;rtAllCriticsRating&#39;</span><span class="p">,</span> <span class="s1">&#39;rtTopCriticsRating&#39;</span><span class="p">,</span> <span class="s1">&#39;rtAudienceRating&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="n">rate_stats</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>rtAllCriticsRating</th>
      <th>rtTopCriticsRating</th>
      <th>rtAudienceRating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>8441.000000</td>
      <td>4662.000000</td>
      <td>7345.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>6.068404</td>
      <td>5.930330</td>
      <td>3.389258</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.526898</td>
      <td>1.534093</td>
      <td>0.454034</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.200000</td>
      <td>1.600000</td>
      <td>1.500000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>5.000000</td>
      <td>4.800000</td>
      <td>3.100000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>6.200000</td>
      <td>6.100000</td>
      <td>3.400000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>7.200000</td>
      <td>7.100000</td>
      <td>3.700000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>9.600000</td>
      <td>10.000000</td>
      <td>5.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">count</span></code> statistic tells us <em>how many</em> non-missing values there are.  Let‚Äôs augument this with % missing - we‚Äôre going to <em>transpose</em> the statistics frame (with <code class="docutils literal notranslate"><span class="pre">.transpose()</span></code>), and then create a column that divides count by the length of the original frame:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rate_stats</span> <span class="o">=</span> <span class="n">rate_stats</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">rate_stats</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>rtAllCriticsRating</th>
      <td>8441.0</td>
      <td>6.068404</td>
      <td>1.526898</td>
      <td>1.2</td>
      <td>5.0</td>
      <td>6.2</td>
      <td>7.2</td>
      <td>9.6</td>
    </tr>
    <tr>
      <th>rtTopCriticsRating</th>
      <td>4662.0</td>
      <td>5.930330</td>
      <td>1.534093</td>
      <td>1.6</td>
      <td>4.8</td>
      <td>6.1</td>
      <td>7.1</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>rtAudienceRating</th>
      <td>7345.0</td>
      <td>3.389258</td>
      <td>0.454034</td>
      <td>1.5</td>
      <td>3.1</td>
      <td>3.4</td>
      <td>3.7</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rate_stats</span><span class="p">[</span><span class="s1">&#39;frac_observed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rate_stats</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">movies</span><span class="p">)</span>
<span class="n">rate_stats</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
      <th>frac_observed</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>rtAllCriticsRating</th>
      <td>8441.0</td>
      <td>6.068404</td>
      <td>1.526898</td>
      <td>1.2</td>
      <td>5.0</td>
      <td>6.2</td>
      <td>7.2</td>
      <td>9.6</td>
      <td>0.827792</td>
    </tr>
    <tr>
      <th>rtTopCriticsRating</th>
      <td>4662.0</td>
      <td>5.930330</td>
      <td>1.534093</td>
      <td>1.6</td>
      <td>4.8</td>
      <td>6.1</td>
      <td>7.1</td>
      <td>10.0</td>
      <td>0.457193</td>
    </tr>
    <tr>
      <th>rtAudienceRating</th>
      <td>7345.0</td>
      <td>3.389258</td>
      <td>0.454034</td>
      <td>1.5</td>
      <td>3.1</td>
      <td>3.4</td>
      <td>3.7</td>
      <td>5.0</td>
      <td>0.720310</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">frac_observed</span></code> means ‚Äòfraction observed‚Äô, and is the fraction of observations for which we have observed a value for this variable, <em>after</em> all our cleaning earlier to get rid of the values that seemed to be present but were actually missing.</p>
<p>When we are describing a variable, it‚Äôs good to know <em>two</em> things:</p>
<ul class="simple">
<li><p>how many of that variable we actually have</p></li>
<li><p>how the values we have are distributed (middle, spread, min/max, and a histogram, usually)</p></li>
</ul>
</div>
</div>
<div class="section" id="ignoring-missing-values">
<h2>Ignoring Missing Values<a class="headerlink" href="#ignoring-missing-values" title="Permalink to this headline">¬∂</a></h2>
<p>One way to handle missing values is to just <strong>ignore them</strong>.  The Pandas aggregate functions, for example, will skip missing values by default.  So if you compute the mean critic rating:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtAllCriticsRating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6.068404217509789
</pre></div>
</div>
</div>
</div>
<p>it is taking the mean <em>of the values we have</em>.  In particular, the missing values are <em>not</em> counted in the denominator.</p>
<p>We can tell it not to skip missing values, with the <code class="docutils literal notranslate"><span class="pre">skipna</span></code> option:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtAllCriticsRating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">skipna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>nan
</pre></div>
</div>
</div>
</div>
<p>The result is NaN, because some values are missing, and adding NaN to a value results in NaN.  So the sum of values ‚Äî the numerator of the mean ‚Äî is NaN, and the final mean is NaN.  NaNs are infectious in floating-point operations: once you have one, it propagates through the rest of the computation.</p>
<p>Many of our plot types will also ignore missing values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtAllCriticsRating&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\michaelekstrand\Anaconda3\lib\site-packages\numpy\lib\histograms.py:839: RuntimeWarning: invalid value encountered in greater_equal
  keep = (tmp_a &gt;= first_edge)
C:\Users\michaelekstrand\Anaconda3\lib\site-packages\numpy\lib\histograms.py:840: RuntimeWarning: invalid value encountered in less_equal
  keep &amp;= (tmp_a &lt;= last_edge)
</pre></div>
</div>
<img alt="../../../_images/MissingData_33_1.png" src="../../../_images/MissingData_33_1.png" />
</div>
</div>
<p>The scatter plot will ignore values for which <em>either</em> value is missing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">relplot</span><span class="p">(</span><span class="s1">&#39;rtAllCriticsRating&#39;</span><span class="p">,</span> <span class="s1">&#39;rtAudienceRating&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">movies</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;All Critics&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Audience&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/MissingData_35_0.png" src="../../../_images/MissingData_35_0.png" />
</div>
</div>
<p>This is often fine: if we want to understand the mean rating, understanding the mean <em>of the data we have</em> is often appropriate.  This is an additional qualification to the question, but that is a part of the question refinement process.</p>
<p>Another way missing data can be ignored is in a group-by: if we group-by and we have missing data, ignoring those values just mean they don‚Äôt contribute to any group.  If that does not seriously impact the validity of our analysis with respect to our goals and the meaning of the data, we‚Äôre often fine!</p>
<p>If we are trying to understand how a variable differs between different groups of data points, and we don‚Äôt know which group some of the points are in (we have missing data in our group categorical variable), we may well have enough other data points where we <em>do</em> know the value that we can reasonably understand the approximate differences between groups without that data point‚Äôs contribution.</p>
<p>But, we don‚Äôt want to just ignore the data without thinking or documenting the fact.  We should report the number and/or fraction observed, so that we have context to interpret the statistics we compute in the face of missing data.</p>
<p>One way in which ignoring missing data can be misleading is if the missing data would ‚Äî if we knew it ‚Äî have a different distribution than the observed data.  This is simultaneously common and difficult to address (or even reliably tell if it is happening).  There are usually two things we need to do in this case:</p>
<ul class="simple">
<li><p>analyze the data we have, and appropriately discuss the limitations of our analysis in the face of missing data</p></li>
<li><p>try to get better data</p></li>
</ul>
<p>In addition to dropping individual values, we can drop <em>entire observations</em> that have missing data.</p>
</div>
<div class="section" id="filling-data">
<h2>Filling Data<a class="headerlink" href="#filling-data" title="Permalink to this headline">¬∂</a></h2>
<p>Another way to handle missing data is to <em>fill it in</em> with other value(s).</p>
<div class="section" id="filling-with-a-fixed-value">
<h3>Filling with a Fixed Value<a class="headerlink" href="#filling-with-a-fixed-value" title="Permalink to this headline">¬∂</a></h3>
<p>The Pandas <code class="docutils literal notranslate"><span class="pre">fillna</span></code> method (applicable to both <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>) fills in missing values with a specified value.</p>
<p>There are two cases when this is clearly appropriate.  The first is when we <strong>know the value of the missing data</strong>.  For example, if we count the number of ratings in our data set, and join that with the movies table:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">movie_stats</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;movieID&#39;</span><span class="p">)[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="s1">&#39;mlNumRatings&#39;</span><span class="p">,</span>
    <span class="s1">&#39;mean&#39;</span><span class="p">:</span> <span class="s1">&#39;mlAvgRating&#39;</span>
<span class="p">})</span>
<span class="n">movie_info</span> <span class="o">=</span> <span class="n">movies</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">movie_stats</span><span class="p">)</span>
<span class="n">movie_info</span><span class="p">[</span><span class="s1">&#39;mlNumRatings&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    10109.000000
mean        84.637254
std        172.115584
min          1.000000
25%          6.000000
50%         21.000000
75%         75.000000
max       1670.000000
Name: mlNumRatings, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>There are few values missing!  If we have a movie that never appears in our movie ratings frame, we know that its number of rating is 0, so it is appropriate to fill in the missing values with 0:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">movie_info</span><span class="p">[</span><span class="s1">&#39;mlNumRatings&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">movie_info</span><span class="p">[</span><span class="s1">&#39;mlNumRatings&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    10197.000000
mean        83.906835
std        171.549962
min          0.000000
25%          6.000000
50%         20.000000
75%         73.000000
max       1670.000000
Name: mlNumRatings, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Now the missing values (all 88 of them) are filled in, and we have a minimum value of 0.</p>
<p><strong>Note:</strong> we used the <em>inplace</em> version of the method, with <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code>.  This modified the series in-place (in its place in the frame), instead of returning of a new series.</p>
<p>If a value is not a count of some kind, then it‚Äôs unlikely that filling with 0 is the appropriate value.</p>
<p>The second case when filling missing data is clearly appropriate is when we are <strong>filling with an unknown-data code</strong>.  This is most common with categorical (or sometimes ordinal) data.  Sometimes this is a new code, and we are just treating ‚Äòunknown‚Äô as another category; in other times, there is already a code for ‚Äòunknown‚Äô, and it‚Äôs reasonable to treat all kinds of ‚Äòunknown‚Äô as the same.</p>
<p>In other cases, figuring out how to fill in the <strong>data</strong> in an abstract sense is usually not the best way to approach the problem.  Instead, think about how each specific analysis should handle missing data; if it is appropriate to fill in a value, the value may differ from one analysis to another!</p>
<p>For one immediate example, if we fill in missing ratings with 0, and then take the mean, that will bias the mean towards 0, beacuse there are so many (invalid) 0 values in the data.  We probably don‚Äôt want that!</p>
</div>
<div class="section" id="filling-with-another-series">
<h3>Filling with Another Series<a class="headerlink" href="#filling-with-another-series" title="Permalink to this headline">¬∂</a></h3>
<p>Sometimes, we have two series of data, and we want to treat series <em>B</em> as a fallback for series <em>A</em>: use data from series A if we can, and if not, use B (if neither has the data, it will remain missing).</p>
<p>The Pandas <code class="docutils literal notranslate"><span class="pre">combine_first</span></code> method does exactly this.  The code</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>seriesA.combine_first(seriesB)
</pre></div>
</div>
<p>will use values from <code class="docutils literal notranslate"><span class="pre">seriesA</span></code> when available, and try to fill in missing values with data from <code class="docutils literal notranslate"><span class="pre">seriesB</span></code>.  Both series need to have the same index.</p>
<p>For example, if we want to use top-critics ratings first, but if they aren‚Äôt available, fall back to all-critics ratings, we could:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">merge_rates</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtTopCriticsRating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span><span class="n">movies</span><span class="p">[</span><span class="s1">&#39;rtAllCriticsRating&#39;</span><span class="p">])</span>
<span class="n">merge_rates</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    8441.000000
mean        6.016420
std         1.547711
min         1.200000
25%         4.900000
50%         6.200000
75%         7.200000
max        10.000000
Name: rtTopCriticsRating, dtype: float64
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="imputing-values">
<h3>Imputing Values<a class="headerlink" href="#imputing-values" title="Permalink to this headline">¬∂</a></h3>
<p><em>Imputation</em> fills in missing values with a result of some computation.  In its simplest form, it is technically the same as filling with a single value: for example, we may assume that missing values are equal to the mean of the other values in the column.  We may do more sophisticated imputation, trying to predict the missing data from other variables in the observation.</p>
<p>The <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.impute.SimpleImputer.html#sklearn.impute.SimpleImputer" title="(in scikit-learn v1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleImputer</span></code></a> algorithm from scikit-learn will perform simple imputations of features, such as a mean value.  Other imputation strategies can perform more sophisticated analysis.</p>
<p>The challenge with imputation is that the validity of the resulting inferences relies on the validity and accuracy of the imputation strategy.  It can be useful as a part of feature engineering for a machine learning pipeline, where we primarily care about the system‚Äôs ability to predict future values of the outcome or ttarget  variable.</p>
<p>However, when our goal is to understand the data, make observations, and learn things from it, imputation usually impedes that goal, because we are no longer just observing and interpreting the data, but also the results of an imputation process.</p>
</div>
<div class="section" id="think-about-the-analysis">
<h3>Think About the Analysis<a class="headerlink" href="#think-about-the-analysis" title="Permalink to this headline">¬∂</a></h3>
<p>I said at the top of the notebook, and will reiterate in the conclusion, that our missing-data decisions need to <strong>flow from the questions</strong>, and the analysis.</p>
<p>One specific way this manifests is that the choice of value to fill depends in large part on how we want missing data to affect our final computation.  For using the variable as a feature in a machine learning pipeline, either a simple linear model or something more sophisticated, imputing the mean is often <em>mathematically</em> equivalent to ignoring the value for that observation, because the model will learn how to respond to a variable <em>as it differes from the mean</em>; the mean will result in a ‚Äòdefault‚Äô behavior.  In particular, it‚Äôs common good practice to <em>standardize</em> our variables prior to such analyses by subtracting the mean from the observed values so they have a mean of zero; when we do this, there is no difference between filling in the mean first, and filling the missing standardized values with zero, and filling with zero before applying a linear model will cause the missing values to have no effect on their observations‚Äô predictions.</p>
<p>This will become clearer when we get to linear models.  But other types of models may have other responses to different values, and we should choose our handling of the missing data based on how it will influence the analysis results, and whether that is the influence we want it to have.</p>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¬∂</a></h2>
<p>There are several ways we can handle missing data in an analysis.  In this notebook, I have argued that we should approach the problem based on the influence missing data should have on our final analysis, rather than treating it as a problem to be solved at the data level.</p>
<p>We have, broadly speaking, two tools for dealing with missing data:</p>
<ul class="simple">
<li><p>Ignore it (either the individual value, or the entire observation)</p></li>
<li><p>Fill in a suitable default or assumed value</p></li>
</ul>
<p>In a few cases, there is a reasonable and clear choice from the data itself.  But in general, the fundamental question guiding what we do with missing data is this: ‚Äúhow should an observation with missing value(s) be reflected in my analysis?‚Äù.  The answer to this question will differ between one analysis and another.</p>
<p>There are a few principles that are general good practice, however:</p>
<ul class="simple">
<li><p>Describe the missingness of the data ‚Äî how many values are missing, and what fraction of the observations are they?</p></li>
<li><p>If helpful, look at whether other features of the data differ between instances with missing values for a variable and those with known values.  This can help shed light on whether the missing data has a systematically different distribution than the observed data, and what impact that may have on your final analysis.</p></li>
<li><p>Bind missing-data operations to the <em>analysis</em>, not to the data load and pre-processing stages.  If you need to compute the mean of a series, treating missing values as 5 for some well-defined reason, put the <code class="docutils literal notranslate"><span class="pre">fillna</span></code> <em>with the other operation</em> in the analysis.  Think of it, and describe it, as the operation ‚Äúcompute the mean of the series, assuming missing values are 5‚Äù, rather than ‚Äúcompute the mean of this variable, that we have filled with 5s for unrelated reasons‚Äù.  This will make it easier for you to reason about the correctness and appropriateness of how you handle the missing data in the context of specific analyses and computations.</p></li>
<li><p>Use analyses that can deal with missing data when practical, instead of needing to pretend it isn‚Äôt missing.</p></li>
</ul>
<p>Sometimes, you will do several analyses with the same missing-data transformation of the variable.  In these cases, it can be reasonable to do this transformation where you are loading and cleaning up the data, but describe and justify the transformation in terms of the analysis you are performing and its correctness for having the desired effects on that analysis.  Also, consider defining a <em>new</em> variable that is ‚Äúold variable with this missing data operation performed‚Äù instead of just cleaning the old variable.</p>
<p>At the end of the day, our missing data treatment ‚Äî like all other aspects of our analysis ‚Äî needs to flow from our analysis goals and research questions, and we need to defend it on the basis of how it will impact the conclusions we draw.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./resources\tutorials"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../MinimizeRegression/" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Rebuilding Regression</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../MovieDecomp/" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Movie Matrix Decomposition</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Michael D. Ekstrand<br/>
        
            &copy; <a href="../../../copyright/">Copyright</a> 2021.<br/>
          <div class="extra_footer">
            <script data-goatcounter="https://cs533.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>